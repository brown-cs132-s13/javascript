var Feeder={domain:"localhost:1337",seen:{},buffer:[],lastBufferLength:0,init:function(e){this.domain=e;var t=this;setInterval(function(){t.update()},3e3),setInterval(function(){t.sink()},1e3)},update:function(){var e=this,t=new XMLHttpRequest;t.open("GET","http://"+this.domain+"/feed/designer",!0);var n=function(){if(200==t.status)for(var n=JSON.parse(t.responseText),s=0;n.length>s;s++){var r=n[s];if(!e.seen.hasOwnProperty(r.id_str)){e.seen[r.id_str]=!0;var a=new CustomEvent("swagreceived");a.text=r.text,a.name=r.user.name,a.handle=r.user.screen_name,a.tweet=r,e.buffer.push(a)}}else console.warn("Beiber feed request failure!",t)};t.addEventListener("load",n,!1),t.send(null)},sink:function(){var e=this.buffer.length-this.lastBufferLength;console.log(e);for(var t,n=Math.min(this.buffer.length,1),s=0;n>s;s++)t=this.buffer.pop(),document.dispatchEvent(t);this.lastBufferLength=this.buffer.length}};